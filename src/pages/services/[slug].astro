---
import Layout from "../../layouts/Layout.astro";
import Button from "../../components/ui/Button.astro";
import { products } from "../../data/services";
import Footer from "../../components/Footer.astro";

export async function getStaticPaths() {
  return products.map((product) => ({
    params: { slug: product.slug },
  }));
}

const { slug } = Astro.params;
const product = products.find((p) => p.slug === slug);

interface data {
  date: string;
  usd: {
    uzs: string;
  };
}

const API_URL =
  "https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies/usd.json";

const response = await fetch(API_URL);
const data = await response.json();
---

<Layout title="WEATHWISE">
  <main class="pb-5">
    <nav
      class="navbar navbar-dark navbar-expand-lg py-5 pb-3 position-relative"
    >
      <div class="position-absolute w-100 header top-0 py-1 default-text">
        <div class="container d-flex justify-content-between">
          <a href="tel:+998900979007" class="text-decoration-none tel"
            ><span class="default-text">Tel: </span>+998 90 097 90 07</a
          >

          <div class="d-flex align-items-center gap-2 rate">
            <div class="d-flex align-items-center gap-1">
              <img src="/us.png" width="24" alt="USD" />
              <span>1$</span>
            </div>
            <span> = </span>
            <div class="d-flex align-items-center gap-1">
              <img src="/uz.png" width="24" alt="UZS" />
              <span>{Math.round(data.usd.uzs)} sums</span>
            </div>
          </div>
        </div>
      </div>
      <div class="container">
        <a class="navbar-brand" href="/">WEALTHWISE</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="/#home">Главная</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/#about">О нас</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/#services">Услуги</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/pricing">Тарифы</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Новости</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/#contact">Связаться с нами</a>
            </li>
          </ul>
          <div class="d-flex gap-4 text-white align-items-center flex-wrap">
            <div class="dropdown">
              <a
                href="#"
                class="dropdown-toggle text-decoration-none"
                data-bs-toggle="dropdown"
                aria-expanded="false">EN</a
              >

              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">UZ</a></li>
                <li><a class="dropdown-item" href="#">RU</a></li>
                <li><a class="dropdown-item" href="#">EN</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <div class="container mt-5">
      <div class="row">
        {
          product ? (
            <>
              <h4 class="fw-bold">{product.title}</h4>
              <div class="mt-3" set:html={product.description} />
            </>
          ) : (
            <h1>404 - Product Not Found</h1>
          )
        }

        <div style="width: 250px;" class="mt-3">
          <Button label="Свяжитесь с нами" variant="filled" href="/#contact" />
        </div>
      </div>
    </div>
  </main>
  <Footer />

  <style>
    .card-title {
      font-weight: 700;
    }

    .card,
    .card-header {
      border-radius: 30px;
      border-color: var(--text-dark-color);
      background-color: var(--secondary-color);
      color: var(--text-dark-color);
    }

    .card-header {
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
      padding: 16px 0;
      font-weight: 700;
    }

    .card-body {
      padding: 16px;
    }

    main {
      /* background-image: url("../landing-dark.jpg"); */
      background: var(--secondary-color);
      /* background-size: cover; */
      /* background-position: center; */
      /* background-repeat: no-repeat; */
      color: var(--text-dark-color);
    }

    nav {
      background: var(--gradient-color);
    }

    .header {
      background: var(--secondary-color);
    }

    .default-text {
      color: var(--text-dark-color);
    }

    .rate {
      font-weight: 600;
    }

    .navbar-brand {
      font-weight: 600;
    }

    /* .row {
      height: calc(100vh - 140px);
    } */

    ul li {
      padding: 0 8px;
    }

    .navbar-brand {
      margin-right: 3rem;
    }

    .header-title {
      font-size: 46px;
      line-height: 52px;
      font-weight: 500;
      color: var(--text-dark-color);
    }

    .header-subtitle {
      font-size: 28px;
      line-height: 32px;
      font-weight: 400;
      color: var(--text-light-color);
    }

    ul li a {
      color: var(--text-light-color);
      font-weight: 500;
    }

    ul li a:hover {
      color: var(--primary-color);
    }

    ul li a.active {
      color: var(--text-dark-color);
    }

    .tel {
      font-weight: 600;
      color: var(--primary-color);
    }

    .dropdown-toggle {
      color: var(--text-light-color);
      font-weight: 500;
    }

    .dropdown-menu {
      background-color: var(--secondary-color);
    }

    .dropdown-item {
      color: var(--text-dark-color) !important;
      /* font-weight: 500 !important; */
    }

    .dropdown-item:focus {
      background-color: var(--secondary-color);
    }

    @media only screen and (max-width: 991px) {
      ul li {
        padding: 0;
      }
    }

    .btn-primary {
      background-color: var(--secondary-color);
      border-color: var(--secondary-color);
    }

    @media only screen and (max-width: 575px) {
      .tel {
        font-size: 12px;
        font-weight: 600;
        color: var(--secondary-color);
      }

      .rate {
        font-size: 12px;
      }
    }
  </style>
</Layout>
